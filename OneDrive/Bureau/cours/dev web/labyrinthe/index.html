<!doctype html> 

<html>
<head>
    <title>Labyrinthe</title>
    <link rel="stylesheet" href="style.css">
</head>
    <body>
    <div class="page">
                <div id="laby">
        
                </div>
                
            <input type="button" value="GO" onclick="afficheLaby();"><br/><BR><BR>
                <input type="button" value="lance le timer" onclick="tiler();">

            <div class="page2">
                
                <input type="button" value="up" class="navigationUp"> 
                <input type="button" value="down" class="navigationDown"> 
                <input type="button" value="left" class="navigationLeft"> 
                <input type="button" value="right" class="navigationRight"> 

                <h2 id="information">test</h2>
        
            </div>
           
            
        </div>
        <div class="controle">
            <div class="timer0"> <p class="timer">00:00</p></div>
            <div id="bip" class="display"></div>
            <div class="idicationtouche"><p> les diférents controle ici :</p></div>
        </div>
 
    <script language="JavaScript">
        m='m'; //représente un mur
        p='p'; //représente le personnage
        b='b'; //représente le chemin
        f="f"; //représente le trophée 

        var xperso=1; //position initial du personnage sur l'axe X
        var yperso=1; //postition initial du personnage sur l'axe Y
        //tableau à double entrée représentant votre labyrinthe, vous pouvez le modifier pour comprendre le fonctionnement
        var laby = [[m,m,m,m,m,m,m,m,m,m],
                    [m,p,m,b,b,b,b,b,b,m],
                    [m,b,m,b,m,m,m,b,m,m],
                    [m,b,m,b,m,b,m,b,b,m],
                    [m,b,b,b,m,b,m,m,b,m],
                    [m,b,m,b,m,b,b,b,b,f],
                    [m,m,m,m,m,m,m,m,m,m]];
                   
                   
      
         
        function afficheLaby() //ne rien modifier dans cette fonction
        {
            var leLaby=document.getElementById("laby");
            insertion="<table border=0 cellspacing=0 cellpadding=0>";
         
         
            for(i=0;i<7;i++)
            {
            insertion+="<tr>";
                for(j=0;j<10;j++)
                {
                 
                    if (laby[i][j]==m)
                    {
                    insertion+="<td>";
                    insertion+="<img width='52'height='52' src='Assets/stonewall.png'>";
                    insertion+="</td>";
                    }
                    if (laby[i][j]==p)
                    {
                    insertion+="<td>";
                    insertion+="<img width='52' height='52' style='background-image:Assets/Ground.png' src='Assets/Heros.png'>";
                    insertion+="</td>";
                    }
                    if (laby[i][j]==b)
                    {
                    insertion+="<td>";
                    insertion+="<img width='52' height='52' src='Assets/Ground.png'>";
                    insertion+="</td>";
                    }

                     
                    if (laby[i][j]==f)
                    {
                    insertion+="<td>";
                    insertion+="<img width='52' height='52'src='Assets/Trophy.png'>";
                    insertion+="</td>";
                    }
                     
             
                     
                }
                insertion+="</tr>";
            }  
             
            insertion+="</table>";
            leLaby.innerHTML=insertion;
        }
         
        const NAVIGATIONUP = document.querySelector(".navigationUp")
        var navigationcliqueUp = NAVIGATIONUP.addEventListener("click", ()=> {mouvement('up')}, false)
        const NAVIGATIONDOWN = document.querySelector(".navigationDown")
        var navigationcliqueDown = NAVIGATIONDOWN.addEventListener("click", ()=> {mouvement('down')}, false)
        const NAVIGATIONLEFT = document.querySelector(".navigationLeft")
        var navigationcliqueLeft = NAVIGATIONLEFT.addEventListener("click", ()=> {mouvement('left')}, false)
        const NAVIGATIONRIGHT = document.querySelector(".navigationRight")
        var navigationcliqueRight = NAVIGATIONRIGHT.addEventListener("click", ()=> {mouvement('right')}, false)

        const CLAVIERNAV = document.addEventListener("keyup", clavier, false) 
        // var navigationcliqueUp = NAVIGATIONUP.addEventListener("click", ()=> {mouvement('up')}, false)
        // const NAVIGATIONDOWN = document.querySelector(".navigationDown")
        // var navigationcliqueDown = NAVIGATIONDOWN.addEventListener("click", ()=> {mouvement('down')}, false)
        // const NAVIGATIONLEFT = document.querySelector(".navigationLeft")
        // var navigationcliqueLeft = NAVIGATIONLEFT.addEventListener("click", ()=> {mouvement('left')}, false)
        // const NAVIGATIONRIGHT = document.querySelector(".navigationRight")
        // var navigationcliqueRight = NAVIGATIONRIGHT.addEventListener("click", ()=> {mouvement('right')}, false)

            function clavier(e){
                // console.log(e.code);
                switch(e.code){
                    case "ArrowDown":
                        mouvement("down");
                        break;
                    case "ArrowUp":
                        mouvement("up");
                        break;
                    case "ArrowLeft":
                        mouvement("left");
                        break;
                    case "ArrowRight":
                        mouvement("right");
                        break;
                        case "KeyS":
                        mouvement("down");
                        break;
                    case "KeyW":
                        mouvement("up");
                        break;
                    case "KeyA":
                        mouvement("left");
                        break;
                    case "KeyD":
                        mouvement("right");
                        break;
                }
            }

                
            
            var pasbon =document.getElementById("laby");

        function mouvement(type){

            switch(type){
                case "up":
                    var newxperso = xperso;
                    var newyperso = yperso -1;
                    break;
                    
                case "down":
                    var newxperso = xperso;
                    var newyperso = yperso +1;
                    break;
                case "left":
                    var newxperso = xperso -1;
                    var newyperso = yperso;
                    break;
                case "right":
                    var newxperso = xperso +1;
                    var newyperso = yperso;
                    break;
                    
            }        
        
        
             
            var np = laby[newyperso][newxperso];
            console.log(np);
            if(np == "b" || np == "f"){
                var op = laby[yperso][xperso];
                laby[newyperso][newxperso] = op;
                if (np == "f"){
                    laby[yperso][xperso] = "b";
                }else{
                    laby[yperso][xperso] = np;
                }
                xperso =newxperso;
                yperso = newyperso;
                pasbon.style.borderColor = "rgb(58, 58, 58)";
                }
            if (np == "f") {
                document.querySelector("#information").innerHTML= "Bravo tu as gagné"
                pasbon.style.borderColor = "green";
                
            }
            if (np == "b") {
                document.querySelector("#information").innerHTML= ""
                
            }
            if (np == "m"){
                document.querySelector("#information").innerHTML= "tu ne peux pas foncer dans le mur !"
                
                pasbon.style.borderColor = "red";
            
            }
            
            afficheLaby()

        
        } 
         //timer 
         var counter = 60;
        var intervalId = null;
        function finish() {
            clearInterval(intervalId);
            document.getElementById("bip").innerHTML = "TERMINE!";	
            }
        function bip() {
            counter--;
            if(counter == 0) finish();
            else {	
                document.getElementById("bip").innerHTML = counter + " secondes restantes";
                }	
                }
            function start(){
                intervalId = setInterval(bip, 1000);
                }	
                
                         
         
    </script>
</body>
</html> 